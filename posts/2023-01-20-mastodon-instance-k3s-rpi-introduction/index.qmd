---
title: "Running your own Mastodon instance on a Raspberry Pi k3s cluster"
subtitle: "Now you too can unwittingly become an unpaid sysadmin!"
date: "2023-01-20 16:15:00"
categories: [personal, raspberry pi, k3s, mastodon]
citation:
    url: https://magsol.github.io/posts/2023-01-20-mastodon-instance-k3s-rpi-introduction/
image: "elephant.png"
image-alt: "Rear view of a sitting elephant gazing at mountains in the distance (generated by Midjourney)."
author: "Shannon Quinn"
---
![](elephant.png){fig-alt="Rear view of a sitting elephant gazing at mountains in the distance (generated by Midjourney)."}

 1. Introduction _(this post)_
 2. [Part I: My home network topology](../2023-01-23-mastodon-home-network-topology/index.qmd)
 3. [Part II: The Mastodon Helm chart](../2023-01-25-mastodon-helm-chart/index.qmd)
 4. [Part III: Configuring and installing prerequisites](../2023-02-09-configuring-and-installing-prereqs/index.qmd)
 5. [Part IV: The waking nightmare that is Let's Encrypt](../2023-02-16-ssl-with-lets-encrypt/index.qmd)
 6. [Part V: Actually installing Mastodon](../2023-02-24-installing-and-configuring-mastodon/index.qmd)
 7. [Conclusions](../2023-02-28-mastodon-conclusions/index.qmd)

As I mentioned in my previous post, I spent the last month of last year spinning up my own Mastodon instance ([which you can check out](https://quinnwitz.house/)!) I've had a Raspberry Pi cluster of 5x Pi 4B modules sitting around for the better part of the last two years^[Yes, I did indeed purchase them two years ago. Would've been nigh impossible to get them at any time in between ðŸ˜¬]. I've occasionally toyed with installing [k3s](https://k3s.io/) and experimenting with various bits and pieces of kubernetes, but never actually deployed something I found useful.

![Don't worry, they're well protected.](pi_cluster.jpg){fig-alt="A very suspicious looking server rack for the five Raspberry Pi computers."}

Don't get me wrong--I do want to go over how I installed and configured k3s on my Raspberry Pi cluster. It's remarkable how quickly this area of things moves, and the guides I was working off for this were all 2-3 years old, and _remarkably_ outdated. So a more recent tutorial on that basic component would definitely have its niche, I think.

But first, I want to kick off a series of posts detailing how I got a Mastodon instance running! It took a surprising amount of wrangling, so I wanted to share my experience before I forget the tiny details.

Why would you be interested in this series? Aside from the usual rough-and-tumble of installing anything on kubernetes via [helm](https://helm.sh/), the two parts that took the greatest amount of time and effort were 1) getting the Mastodon _dependencies_ to work, and 2) wrestling [Let's Encrypt](https://letsencrypt.org/) into submission. That first point is interesting because while Mastodon itself works just fine on ARM, the default images included in the Mastodon helm chart for the dependencies do _NOT_, and so it won't work out-of-the-box on a Raspberry Pi cluster^[As of February 24, 2023, this is no longer true! [Here's the announcement from Bitnami](https://blog.bitnami.com/2023/02/bitnami-arm-containers-available-at.html) of ARM-compatible images]. And the second point was just plain rage-inducing, and I'd love for folks to not have to experience that.

I'll fill in the links as I write the posts, so that you can bookmark this page if you'd like, though I'll make sure to include the links on the other posts as well as I write them. In the meantime, don't hesitate to drop any pointers / corrections / questions!